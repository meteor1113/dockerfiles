name: deepin-xfce4

on:
  push:
    branches: [ "main" ]
    paths:
      - "deepin-xfce4/**"
      - ".github/workflows/deepin-xfce4.yml"
  pull_request:
    branches: [ "main" ]
    paths:
      - "deepin-xfce4/**"
      - ".github/workflows/deepin-xfce4.yml"

jobs:
  deploy:
    uses: meteor1113/dockerfiles/.github/workflows/deploy_docker_hub.yml@main
    with:
      context: "{{defaultContext}}:deepin-xfce4"
      # platforms: "linux/amd64"
      images: "meteor1113/deepin-xfce4"
      tags: |
        type=raw,value=23
        type=raw,value=latest
        type=sha
    secrets:
      username: ${{ secrets.DOCKERHUB_USERNAME }}
      token: ${{ secrets.DOCKERHUB_TOKEN }}
    # runs-on: ubuntu-latest
    # steps:
    #   # -
    #   #   # Add support for more platforms with QEMU (optional)
    #   #   # https://github.com/docker/setup-qemu-action
    #   #   name: Set up QEMU
    #   #   uses: docker/setup-qemu-action@v3
    #   -
    #     name: Set up Docker Buildx
    #     uses: docker/setup-buildx-action@v3
    #   -
    #     name: Login to Docker Hub
    #     uses: docker/login-action@v3
    #     with:
    #       username: ${{ secrets.DOCKERHUB_USERNAME }}
    #       password: ${{ secrets.DOCKERHUB_TOKEN }}
    #   -
    #     name: Build and push
    #     uses: docker/build-push-action@v6
    #     with:
    #       context: "{{defaultContext}}:deepin-xfce4"
    #       push: true
    #       tags: |
    #         meteor1113/deepin-xfce4:23
    #         meteor1113/deepin-xfce4:latest
